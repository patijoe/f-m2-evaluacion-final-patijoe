"use strict";const field=document.querySelector(".field"),btn=document.querySelector(".btn"),list=document.querySelector(".list"),listFav=document.querySelector(".list__favorites");let favorites=JSON.parse(localStorage.getItem("favorites"));function read(){remove(),fetch(`http://api.tvmaze.com/search/shows?q=${field.value}`).then(e=>e.json()).then(e=>{createElement(e);const t=document.querySelectorAll(".item__list");for(let e=0;e<t.length;e++)t[e].addEventListener("click",select),t[e].addEventListener("click",()=>{createElementFavorite(favorites)})})}function createElement(e){for(let t=0;t<e.length;t++){const i=document.createElement("li");i.classList.add("item__list");const n=document.createElement("img");n.classList.add("item__img");const l=document.createElement("h2");l.classList.add("item__title");const o=e[t].show.image;n.src=null===o?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":o.medium;const c=document.createTextNode(e[t].show.name);l.appendChild(c),i.appendChild(l),i.appendChild(n),list.appendChild(i)}}function createElementFavorite(e){if(removeIniFav(),null===favorites)favorites=[];else for(let t=0;t<e.length;t++){const i=document.createElement("li");i.classList.add("item__list-fav");const n=document.createElement("img");n.classList.add("item__img-fav");const l=document.createElement("h2");l.classList.add("item__title-fav");const o=e[t].img;console.log("__**__",o),n.src=null===o?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":o;const c=document.createTextNode(e[t].name);l.appendChild(c),i.appendChild(l),i.appendChild(n),listFav.appendChild(i)}}function select(e){const t=e.currentTarget;t.classList.toggle("item__list2");const i={};i.name=t.querySelector(".item__title").innerHTML,i.img=t.querySelector(".item__img").src,favorites.push(i),saveLocalStorage(favorites)}function saveLocalStorage(e){localStorage.setItem("favorites",JSON.stringify(e))}function remove(){list.innerHTML=""}function removeIniFav(){listFav.innerHTML=""}console.log("mmm",favorites),createElementFavorite(favorites),btn.addEventListener("click",read);